---
title: 'Security'
description: 'Securing your webhook integration'
---

Security is paramount when exposing webhook endpoints. Posthook provides tools to ensure that your communication is secure and authenticated.

## Keys

### API Key
The **API Key** is used to authenticate *your* requests to the Posthook API (e.g., when scheduling a hook via `POST /hooks`). This key grants full access to your project, so it must be kept secret.

- **Usage**: Set in the `X-API-Key` header.
- **Exposure**: Never expose this in client-side code (browsers, mobile apps). safely store it in your backend environment variables.

### Signing Key
The **Signing Key** is used to verify that incoming hooks to your endpoint actually came from Posthook.

- **Usage**: Used to compute the HMAC SHA256 signature found in the `X-Ph-Signature` header.
- **Exposure**: This key should also be kept secret on your backend.

## Idempotency

Retries are a core feature of Posthook. This means that if your server hangs or returns an error, we will send the same hook again.

To prevent processing the same hook twice (e.g., sending a user two emails), your hook handler should be **idempotent**.

### Best Practice
Include a unique ID in your payload (e.g., `idempotency_key`, `event_id`, or your own business logic ID like `reminder_id`).

```json
{
  "path": "/webhooks/remind",
  "data": {
    "reminder_id": "rem_559201",
    "user_id": "usr_201"
  }
}
```

When your handler receives the request:
1. Check if `reminder_id` "rem_559201" has already been processed.
2. If yes, return `200 OK` immediately without doing work.
3. If no, process the work and mark the ID as processed.

## Replay Attacks

To protect against replay attacks (where an attacker intercepts a valid payload and re-sends it later), you should verify the timestamp of the request.

The hook payload includes a `postedAt` field (ISO 8601 timestamp).

### Best Practice
Verify that the `postedAt` timestamp is not too far in the past (e.g., 5 minutes).

```javascript
const TOLERANCE = 5 * 60 * 1000; // 5 minutes
const postedAt = new Date(req.body.postedAt).getTime();
const now = Date.now();

if (now - postedAt > TOLERANCE) {
  // Request is too old, potentially a replay attack
  return res.status(401).send('Request too old');
}
```

## Verifying Signatures

We strongly recommend verifying the `X-Ph-Signature` on every request. See the [Hook Fulfillment](/essentials/hook-fulfillment#verifying-signatures) page for code examples in multiple languages.
